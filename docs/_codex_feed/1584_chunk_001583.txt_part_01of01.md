# File: chunk_001583.txt (part 1 of 1)
```
the prescribed period, then attempts to pull the validation report corresponding to the message id. 17. ATO receives the pull request, looks for the validation report. The SBR 2 channel verifies the AUSKey, finds the response and returns it to the BMS. 18. The BMS receives the payroll event response. If the validation report doesn’t contain any errors the process of submitting payroll event is successfully completed, no further actions are required. Alternative scenarios: a. Authentication and authorisation errors are described after step 8. b. Parent has error or all children have errors are described after step 9. c. If Parent is successful but any employees payroll messages have errors these will need to be re-reported as per error handling framework, if this employee is not going to be reported next period or if has been finalised for the year, that record will need to be fixed and a payroll event update lodged, otherwise may be fixed in next payrun. If all employee messages will be fixed in the next period this lodgment is complete. Validate Employer Message Validate all Employee Messages Legend SBR2 Framework External proces Internal STP process BMS polls for response – after it is there Authenticate & Make response available to the client Pull SBR for the response Get response from SBR 18 17 16 No Yes No Yes No Yes Authenticate and Check Authorisation 6 From this point, failing disasters, the ATO will process and eventually respond to lodgment. Partial File Rejection - Context UNCLASSIFIED – PAYEVNT Technical interactions - Clarification on Partial File Rejection, SLA, File Size, Recovery Strategy Single Touch Payroll Technical Committee (STPTC@ato.gov.au) 6th December 2017 5 How Business Management Software (BMS) responds to partial file rejection. The following diagram and text is taken from section 4 of the STP BIG It is anticipated there will be minimal incidents of channel validation failures. DSPs are expected to address any issues of failure to validate, to ensure non-occurrence of rejected files. This is depicted in figure 4 below, which also provides the options available to payroll officers in the event of a return message. Partial File Rejection – Main points to note UNCLASSIFIED – PAYEVNT Technical interactions - Clarification on Partial File Rejection, SLA, File Size, Recovery Strategy Single Touch Payroll Technical Committee (STPTC@ato.gov.au) 6th December 2017 6 • Lodgment will be rejected only if o Employer Payroll Event message fails channel or backend processing, or o There is not a single Employee Payroll Events message that passes channel validation o (There is one of many other technical reasons – problems in transport, protocol, authentication, etc. – see below) • SBR returns a MaximumSeverity.Code value. Currently, a value of SystemError or Error indicates the failure of the lodgment. This will now be augmented with an new possible value of “Partial”. • The error regime for SBR is complex, it is described in section 5 of the ebMS3 WIG. Figure 13 shows a summary of the different types of errors. The types of errors are: o Transport Exceptions (predominantly from green boxes on slide 4) – these errors may be further broken down: ebMS errors (lodgment does not conform to ebMS 3), depending on where caught, these errors are provided as: HTTP Errors, SOAP Faults or ebMS error signals Appendix A of the WIG contains the list of ebMS errors. Agency messaging channel, like the next category of errors, these are send in Business Event message block o Application Errors (from blue boxes on slide 4) – these are payload specific errors, these are sent in Business Event message block. The ATO Message Repository contains the list of over 7,000 errors in this category (fortunately most don’t all apply to STP) • Actions to take on error: Due to the complexity of the errors, it is not possible to easily and comprehensively describe what actions DSPs should perform when encountering an error. o Generally, if the Overall Business Event message block MaximumSeverity.Code contains SystemError or Error the lodgment will need to be fixed and resubmitted.  If it is a SystemError, the ATO may need to do the fix. Currently specific knowledge of error codes is required to determine who/ what fix is required. The ATO is aware of this and it is already on the Tax Agent Irritant list. o If the MaximumSeverity.Code contains “Partial”, DSPs will be responsible for inspecting individual Employee Payroll Event messages flagged as in error and will need to fix and resubmitted them – either in the next payroll run or in an update lodgment. Each Employee Payroll Event messages in error is referenced in the response using the Record Delimiter Partial File Rejection – Main points to note UNCLASSIFIED – PAYEVNT Technical interactions - Clarification on Partial File Rejection, SLA, File Size, Recovery Strategy Single Touch Payroll Technical Committee (STPTC@ato.gov.au) 6th December 2017 7 • Count of Transactions may not match: As this change means the ATO may now partially reject erroneous Employee Payroll Event messages, the count of the transactions in the original submission file may not match what is ultimately accepted. • Technical Receipts: Once DSP have received a technical receipt for payroll lodgment they should expect ATO will process that lodgment regardless of any subsequent transient unavailability. o The ATO is further investing in the SBR 2 solution to eliminate data loss even in a disaster recovery scenario. Currently, inflight transactions are not replicated across data
```

