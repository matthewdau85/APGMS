services:
  gui:
    image: nginx:alpine
    depends_on:
      normalizer:
        condition: service_started
    ports:
      - "8090:80"
    environment:
      GUI_BRAND: "APGMS Normalizer"
      GUI_TITLE: "Customer Portal"
      GUI_BASE_URL: "/api"
      GUI_SWAGGER_PATH: "/api/openapi.json"
    volumes:
      - ./apps/gui:/usr/share/nginx/html
      - ./ops/nginx.gui.conf:/etc/nginx/conf.d/default.conf:ro
    command: ["/bin/sh","-c","chmod +x /usr/share/nginx/html/start.sh; /usr/share/nginx/html/start.sh"]
