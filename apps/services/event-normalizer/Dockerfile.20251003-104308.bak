FROM python:3.11-slim
WORKDIR /app

# Copy source from repo root (compose build context is the repo root)
COPY apps/services/event-normalizer/app ./app
COPY libs/json /libs/schemas/json

RUN pip install --no-cache-dir ^
    fastapi ^
    "uvicorn[standard]" ^
    pydantic ^
    nats-py ^
    orjson ^
    prometheus-client

EXPOSE 8001
CMD ["uvicorn","app.main:app","--host","0.0.0.0","--port","8001"]
