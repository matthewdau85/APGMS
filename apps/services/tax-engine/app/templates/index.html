{% extends "layout.html" %}
{% block content %}
<form method="post" action="/ui/calc">
  <div class="row">
    <div>
      <label>Method</label>
      <select name="method">
        <option value="table_ato">ATO withholding table</option>
        <option value="formula_progressive">Formula (progressive)</option>
        <option value="percent_simple">Percent simple</option>
        <option value="flat_plus_percent">Flat + percent</option>
        <option value="bonus_marginal">Bonus (marginal)</option>
        <option value="net_to_gross">Net â†’ Gross (solver)</option>
      </select>
    </div>
    <div>
      <label>Period</label>
      <select name="period">
        <option>weekly</option><option>fortnightly</option><option>monthly</option>
      </select>
    </div>
    <div>
      <label>Financial year</label>
      <select name="financial_year">
        {% for year in financial_years %}
        <option value="{{ year }}"{% if year == selected_year %} selected{% endif %}>{{ year }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>Gross (or Regular Gross)</label>
      <input type="number" step="0.01" name="gross" value="2000">
    </div>
  </div>
  <div class="row">
    <div><label>Percent</label><input type="number" step="0.0001" name="percent" value="0.2"></div>
    <div><label>Extra (flat)</label><input type="number" step="0.01" name="extra" value="0"></div>
    <div><label>Bonus</label><input type="number" step="0.01" name="bonus" value="0"></div>
  </div>
  <div class="row">
    <div><label>Tax-free threshold</label><select name="tft"><option value="true">true</option><option value="false">false</option></select></div>
    <div><label>STSL/HELP</label><select name="stsl"><option value="false">false</option><option value="true">true</option></select></div>
    <div><label>Resident</label><select name="resident"><option value="true">true</option><option value="false">false</option></select></div>
    <div><label>Target Net (for netâ†’gross)</label><input type="number" step="0.01" name="target_net" value=""></div>
  </div>
  <div style="margin-top:12px"><button type="submit">Calculate</button></div>
</form>

{% if result %}
  <h2>Result</h2>
  <div class="result">
    {{ result | tojson(indent=2) }}
  </div>
  <h2>Explain</h2>
  <div class="result">
    {% for line in result.get("explain", []) %}
      â€¢ {{ line }}{% if not loop.last %}\n{% endif %}
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
